import{a as G}from"./chunk-XQ3BGOVO.js";import{c as q,d as U,f as O,h as R}from"./chunk-XAZLOLJU.js";import{$ as x,$a as w,Ab as a,Eb as N,Fb as $,Gb as Q,Jb as S,Kb as h,Qa as d,Qb as Y,Rb as T,Sb as A,V as C,a as V,b as k,ba as v,fb as y,ka as u,kb as _,l,la as m,mc as J,ob as f,qb as F,rb as z,sa as b,sb as s,tb as c,ub as j,vb as I,yb as p}from"./chunk-TUDI3YIP.js";var W=["inputValue"],X=n=>({"has-items":n}),Z=n=>({container:n}),tt=n=>({"remove-margin-bottom":n});function et(n,e){n&1&&(s(0,"h1"),h(1,"Minha lista"),c())}var M=class n{inputValue;inputListItems=[];outputAddListItem=new b;focustAndAddItem(e){if(e){this.inputValue.nativeElement.value="";let t=this.generateId();return this.outputAddListItem.emit({checked:!1,value:e,id:t}),this.inputValue.nativeElement.focus()}}generateId(){return Math.random().toString(36).slice(2)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=v({type:n,selectors:[["app-input-add-item"]],viewQuery:function(t,i){if(t&1&&N(W,5),t&2){let o;$(o=Q())&&(i.inputValue=o.first)}},inputs:{inputListItems:"inputListItems"},outputs:{outputAddListItem:"outputAddListItem"},standalone:!0,features:[T],decls:7,vars:10,consts:[["inputValue",""],[3,"ngClass"],["for","input-value",1,"input-label-text",3,"ngClass"],["type","text","id","input-value","placeholder","Adicione um novo item","autofocus","","data-cy","login-input",3,"keyup.enter"],["title","Adicionar um novo item",1,"btn","btn-primary-circle",3,"click"]],template:function(t,i){if(t&1){let o=I();s(0,"header",1),y(1,et,2,0,"h1"),s(2,"div",1)(3,"label",2)(4,"input",3,0),p("keyup.enter",function(){u(o);let g=S(5);return m(i.focustAndAddItem(g.value))}),c(),s(6,"button",4),p("click",function(){u(o);let g=S(5);return m(i.focustAndAddItem(g.value))}),c()()()()}t&2&&(_("ngClass",A(4,X,i.inputListItems.length)),d(),f(i.inputListItems.length>0?1:-1),d(),_("ngClass",A(6,Z,i.inputListItems.length)),d(),_("ngClass",A(8,tt,!i.inputListItems.length)))},dependencies:[J],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{margin-bottom:24px}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin:18px 0;text-align:center}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .remove-margin-bottom[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   header.has-items[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;border-bottom:2px solid var(--black-010)}"]})};var it=(n,e)=>e.id;function nt(n,e){if(n&1){let t=I();s(0,"label",2)(1,"input",3,0),p("input",function(){let o=u(t).$implicit,r=S(2),g=a();return m(g.updateItemCheckbox(o.id,o.value,r.checked))}),c(),s(3,"input",4,1),p("blur",function(){let o=u(t).$implicit,r=S(4),g=a();return m(g.updateItemValue(o.id,r.value,o.checked))}),c(),s(5,"button",5),p("click",function(){let o=u(t).$implicit,r=a();return m(r.deleteItemValue(o.id))}),c()()}if(n&2){let t=e.$implicit;_("for",t.id)("@fadeInOut",void 0),d(),_("checked",t.checked),d(2),_("value",t.value)("id",t.id)}}var E=class n{inputListItems=[];outputUpdateItemCheckbox=new b;updateItemCheckbox(e,t,i){this.outputUpdateItemCheckbox.emit({id:e,value:t,checked:i})}outputUpdateItemValue=new b;updateItemValue(e,t,i){this.outputUpdateItemValue.emit({id:e,value:t,checked:i})}outputUpdateItemDelete=new b;deleteItemValue(e){this.outputUpdateItemDelete.emit({id:e})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=v({type:n,selectors:[["app-input-list-item"]],inputs:{inputListItems:"inputListItems"},outputs:{outputUpdateItemCheckbox:"outputUpdateItemCheckbox",outputUpdateItemValue:"outputUpdateItemValue",outputUpdateItemDelete:"outputUpdateItemDelete"},standalone:!0,features:[T],decls:2,vars:0,consts:[["inputCheckbox",""],["inputValue",""],[1,"input-label-text",3,"for"],["type","checkbox",3,"input","checked"],["type","text","placeholder","Adicione um novo item","autofocus","","data-cy","login-input",3,"blur","value","id"],["title","delete este item",1,"btn","btn-danger-circle",3,"click"]],template:function(t,i){t&1&&F(0,nt,6,5,"label",2,it),t&2&&z(i.inputListItems)},data:{animation:[q("fadeInOut",[R(":enter",[O({opacity:0,transform:"translateY(-20px)"}),U("300ms linear",O({opacity:1,transform:"translateY(0)"}))]),R(":leave",[U("300ms ease-in",O({opacity:0,transform:"translateY(20px)"}))])])]}})};var P=class n{constructor(){}getItemsByStorage(){return JSON.parse(localStorage.getItem("list")||"[]")}setItemsByStorage(e,t){localStorage.setItem("list",JSON.stringify(e))}getAll(){try{let e=this.getItemsByStorage();return l([{status:"success",data:e}])}catch{return l([{status:"error",message:"Erro ao carregar as tarefas"}])}}getById(e){try{let t=this.getItemsByStorage().find(i=>i.id===e);return l([{status:"success",data:t}])}catch{return l([{status:"error",message:"Erro ao carregar as tarefas"}])}}getByStage(e){try{let t=this.getItemsByStorage().filter(i=>e==="pending"?!i.checked:e==="completed"?i.checked:i);return l([{status:"success",data:t}])}catch{return l([{status:"error",message:"Erro ao carregar as tarefas"}])}}save(e){try{let t=[...this.getItemsByStorage(),e];return this.setItemsByStorage(t),l([{status:"success",message:"Tarefa criada com sucesso"}])}catch{return l([{status:"error",message:"Erro ao salvar as tarefas"}])}}updateStage(e,t){try{let i=this.getItemsByStorage().map(o=>o.id===e?k(V({},o),{checked:t==="completed"}):o);return this.setItemsByStorage(i),l([{status:"success",message:"Tarefa atualizada com sucesso"}])}catch{return l([{status:"error",message:"Erro ao atualizar a tarefa"}])}}update(e){try{let t=this.getItemsByStorage().map(i=>i.id===e.id?e:i);return this.setItemsByStorage(t),l([{status:"success",message:"Tarefa atualizada com sucesso"}])}catch{return l([{status:"error",message:"Erro ao atualizar a tarefa"}])}}deleteAll(){try{return localStorage.removeItem("list"),l([{status:"success",message:"Tarefas deletada com sucesso"}])}catch{return l([{status:"error",message:"Erro ao deletar as tarefas"}])}}deleteById(e){try{let t=this.getItemsByStorage().filter(i=>i.id!==e);return this.setItemsByStorage(t),l([{status:"success",message:"Tarefa deletada com sucesso"}])}catch{return l([{status:"error",message:"Erro ao deletar a tarefa"}])}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})};var B=class n{#t=w([]);#e=this.#t.asReadonly();constructor(){}getAll(){return this.#e()}getById(e){return this.#e().find(t=>t.id===e)}getByStage(e){return this.#e().filter(t=>e==="pending"?!t.checked:e==="completed"?t.checked:t)}save(e){this.#t.set([...this.#e(),e])}set(e){this.#t.set(e)}updateStage(e,t){this.#t.update(i=>i.map(o=>o.id===e?k(V({},o),{checked:t==="completed"}):o))}update(e){this.#t.update(t=>t.map(i=>i.id===e.id?e:i))}deleteAll(){this.#t.set([])}deleteById(e){this.#t.update(t=>t.filter(i=>i.id!==e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})};var D=class n{todos=[];completedTodos=[];uncompletedTodos=[];toDoService=x(P);state=x(B);notificationService=x(G);constructor(){}initialize(){this.completedTodos=this.state.getByStage("completed"),this.uncompletedTodos=this.state.getByStage("pending"),this.todos=this.state.getAll()}listen(){this.toDoService.getAll().subscribe(e=>{this.state.set(e.data||[]),this.initialize()})}addTodo(e){this.toDoService.save(e).subscribe(t=>{this.notificationService.success(t.message||"Tarefa adicionada com sucesso"),this.state.save(e),this.initialize()},t=>{this.notificationService.error(t.message||"Aconteceu algum erro")})}updateTodo(e){this.toDoService.update(e).subscribe(t=>{this.notificationService.success(t.message||"Tarefa atualizada com sucesso"),this.state.update(e),this.initialize()},t=>{this.notificationService.error(t.message||"Aconteceu algum erro")})}updateStageTodo(e,t){this.toDoService.updateStage(e,t).subscribe(i=>{this.state.updateStage(e,t),this.initialize()},i=>{this.notificationService.error(i.message||"Aconteceu algum erro")})}removeTodo(e){this.toDoService.deleteById(e).subscribe(t=>{this.notificationService.success(t.message||"Tarefa deletada com sucesso"),this.state.deleteById(e),this.initialize()},t=>{this.notificationService.error(t.message||"Aconteceu algum erro")})}removeAllTodos(){this.toDoService.deleteAll().subscribe(e=>{this.notificationService.success(e.message||"Tarefas deletadas com sucesso"),this.state.deleteAll(),this.initialize()},e=>{this.notificationService.error(e.message||"Aconteceu algum erro")})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})};function ot(n,e){if(n&1){let t=I();s(0,"button",4),p("click",function(){u(t);let o=a(2);return m(o.isAddItem.set(!1))}),h(1,"Crie uma lista de tarefas"),c()}}function rt(n,e){if(n&1){let t=I();s(0,"app-input-add-item",5),p("outputAddListItem",function(o){u(t);let r=a(2);return m(r.addItem(o))}),c()}if(n&2){let t=a(2);_("inputListItems",t.toDoController.todos)}}function st(n,e){if(n&1&&(s(0,"div",0),j(1,"img",1),y(2,ot,2,0,"button",2)(3,rt,1,1,"app-input-add-item",3),c()),n&2){let t=a();d(2),f(t.isAddItem()?2:3)}}function at(n,e){if(n&1){let t=I();s(0,"h3"),h(1,"Pendentes"),c(),s(2,"app-input-list-item",7),p("outputUpdateItemCheckbox",function(o){u(t);let r=a(2);return m(r.updateStageItem(o))})("outputUpdateItemValue",function(o){u(t);let r=a(2);return m(r.updateItem(o))})("outputUpdateItemDelete",function(o){u(t);let r=a(2);return m(r.deleteItem(o.id))}),c()}if(n&2){let t=a(2);d(2),_("inputListItems",t.getItemsByStage("pending"))}}function ct(n,e){if(n&1){let t=I();s(0,"h3"),h(1,"Conclu\xEDdas"),c(),s(2,"app-input-list-item",7),p("outputUpdateItemCheckbox",function(o){u(t);let r=a(2);return m(r.updateStageItem(o))})("outputUpdateItemValue",function(o){u(t);let r=a(2);return m(r.updateItem(o))})("outputUpdateItemDelete",function(o){u(t);let r=a(2);return m(r.deleteItem(o.id))}),c()}if(n&2){let t=a(2);d(2),_("inputListItems",t.getItemsByStage("completed"))}}function ut(n,e){if(n&1){let t=I();s(0,"app-input-add-item",5),p("outputAddListItem",function(o){u(t);let r=a();return m(r.addItem(o))}),c(),s(1,"main",0),y(2,at,3,1)(3,ct,3,1),c(),s(4,"footer")(5,"button",6),p("click",function(){u(t);let o=a();return m(o.removeAllItems())}),h(6,"Deletar todos os items"),c()()}if(n&2){let t=a();_("inputListItems",t.toDoController.todos),d(2),f(t.getItemsByStage("pending").length?2:-1),d(),f(t.getItemsByStage("completed").length?3:-1)}}var K=class n{isAddItem=w(!0);toDoController=x(D);ngOnInit(){this.getAllItems()}getAllItems(){return this.toDoController.listen()}addItem(e){e&&this.toDoController.addTodo(e)}removeAllItems(){this.toDoController.removeAllTodos()}getItemsByStage(e){return e=="pending"?this.toDoController.uncompletedTodos:this.toDoController.completedTodos}updateItem(e){this.toDoController.updateTodo(e)}updateStageItem(e){this.toDoController.updateStageTodo(e.id,e.checked?"completed":"pending")}deleteItem(e){this.toDoController.removeTodo(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=v({type:n,selectors:[["app-to-do"]],standalone:!0,features:[Y([D]),T],decls:2,vars:1,consts:[[1,"container"],["src","assets/img/task-list-null.png","alt","sua lista est\xE1 v\xE1zia","loading","eager"],[1,"btn","btn-primary"],[3,"inputListItems"],[1,"btn","btn-primary",3,"click"],[3,"outputAddListItem","inputListItems"],[1,"btn","btn-danger",3,"click"],[3,"outputUpdateItemCheckbox","outputUpdateItemValue","outputUpdateItemDelete","inputListItems"]],template:function(t,i){t&1&&y(0,st,4,1,"div",0)(1,ut,7,3),t&2&&f(i.toDoController.todos.length?1:0)},dependencies:[M,E],styles:["[_nghost-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}[_nghost-%COMP%]   div.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}[_nghost-%COMP%]   div.container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], [_nghost-%COMP%]   div.container[_ngcontent-%COMP%]   app-input-add-item[_ngcontent-%COMP%]{margin-top:30px;width:100%}[_nghost-%COMP%]   main.container[_ngcontent-%COMP%]{height:calc(100vh - 220px);overflow-y:auto}[_nghost-%COMP%]   main.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}[_nghost-%COMP%]   main.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:var(--black-010)}[_nghost-%COMP%]   main.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--primary);border-radius:5px}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{height:90px;width:100%;display:flex;justify-content:center;align-items:center;border-top:2px solid var(--black-010)}"]})};export{K as a};
