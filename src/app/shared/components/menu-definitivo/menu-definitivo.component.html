<div class="example-container dark example-is-mobile">
	<mat-toolbar class="example-toolbar" [ngClass]="!isMobile ? 'hide' : ''">
		<button mat-icon-button (click)="snav.toggle()">
			<mat-icon>menu</mat-icon>
		</button>
		<h1 class="example-app-name">Menu Principal</h1>
	</mat-toolbar>
	<mat-sidenav-container class="example-sidenav-container" [ngClass]="!isMobile ? 'margin-top-none' : ''">
		<mat-sidenav class="mat-sidenav" #snav [mode]="'side'" (closed)="closeMenu()" [(opened)]="menuOpened">
			<div class="nav-container" [ngClass]="isMobile ? 'vertical-layout' : 'horizontal-layout'">
				<!-- @for (menuLevel of menuDB; track menuLevel; let i = $index) {
					<div class="column">
						<mat-list>
							<mat-list-item class="items" (click)="toggleSubcategory(menuLevel, i + 1)">
								<div class="title">
									{{ menuLevel.name }}
									@if (menuLevel?.subcategories && menuLevel.expanded) {
										<mat-icon>keyboard_arrow_right</mat-icon>
									} @else if (menuLevel?.subcategories && !menuLevel.expanded) {
										<mat-icon>keyboard_arrow_left</mat-icon>
									}
								</div>
							</mat-list-item>
							@if (menuLevel?.subcategories && menuLevel.expanded) {
								<cdk-accordion
									class="example-accordion"
									[ngStyle]="{ transform: menuLevel.expanded ? 'translateY(-20px)' : '' }"
								>
									@for (item of menuAccordion; track item; let index = $index) {
										<cdk-accordion-item
											#accordionItem="cdkAccordionItem"
											class="example-accordion-item"
											role="button"
											tabindex="0"
											[attr.id]="'accordion-header-' + index"
											[attr.aria-expanded]="accordionItem.expanded"
											[attr.aria-controls]="'accordion-body-' + index"
										>
											<div class="example-accordion-item-header" (click)="accordionItem.toggle()">
												{{ item.name }}
												<span class="example-accordion-item-description">
													Click to {{ accordionItem.expanded ? 'close' : 'open' }}
												</span>
											</div>
											<div
												class="example-accordion-item-body"
												role="region"
												[style.display]="accordionItem.expanded ? '' : 'none'"
												[attr.id]="'accordion-body-' + index"
												[attr.aria-labelledby]="'accordion-header-' + index"
											>
												Lorem ipsum dolor, sit amet consectetur adipisicing elit. Perferendis excepturi incidunt ipsum
												deleniti labore, tempore non nam doloribus blanditiis veritatis illo autem iure aliquid ullam
												rem tenetur deserunt velit culpa?
											</div>
										</cdk-accordion-item>
									}
								</cdk-accordion>
							}
						</mat-list>
					</div>
				} -->
				<!-- <div class="menu-container">
					<div *ngFor="let menuLevel of menuDB; let i = index" class="column">
						<mat-list>
							<mat-list-item class="items" (click)="toggleSubcategory(menuLevel, i)">
								<div class="title">
									{{ menuLevel.name }}
									<mat-icon *ngIf="menuLevel?.subcategories && !menuLevel.expanded">keyboard_arrow_right</mat-icon>
									<mat-icon *ngIf="menuLevel?.subcategories && menuLevel.expanded">keyboard_arrow_down</mat-icon>
								</div>
							</mat-list-item>
							<div *ngIf="menuLevel.expanded && menuLevel.subcategories" class="submenu-column">
								<mat-list>
									<mat-list-item
										*ngFor="let subItem of menuLevel.subcategories"
										(click)="toggleSubcategory(subItem, i + 1)"
									>
										{{ subItem.name }}
									</mat-list-item>
								</mat-list>
							</div>
						</mat-list>
					</div>
				</div> -->

				<!-- <mat-nav-list>
					<mat-expansion-panel>
						<mat-expansion-panel-header [scrollLeft]="true">
							<mat-panel-title>Categoria 1</mat-panel-title>
						</mat-expansion-panel-header>
						<div class="subcategory-container">
							<a mat-list-item>Subcategoria 1.1</a>
							<a mat-list-item>Subcategoria 1.2</a>
							<a mat-list-item>Subcategoria 1.3</a>
						</div>
					</mat-expansion-panel>
					<mat-expansion-panel>
						<mat-expansion-panel-header>
							<mat-panel-title>Categoria 2</mat-panel-title>
						</mat-expansion-panel-header>
						<div class="subcategory-container">
							<a mat-list-item>Subcategoria 2.1</a>
							<a mat-list-item>Subcategoria 2.2</a>
							<a mat-list-item>Subcategoria 2.3</a>
						</div>
					</mat-expansion-panel>
					<mat-expansion-panel>
						<mat-expansion-panel-header>
							<mat-panel-title>Categoria 3</mat-panel-title>
						</mat-expansion-panel-header>
						<div class="subcategory-container">
							<a mat-list-item>Subcategoria 3.1</a>
							<a mat-list-item>Subcategoria 3.2</a>
							<a mat-list-item>Subcategoria 3.3</a>
						</div>
					</mat-expansion-panel>
				</mat-nav-list> -->

				<mat-nav-list>
					<!-- Categoria 1 -->
					<div class="category" (click)="openSubmenu($event, 'categoria1')">Categoria 1</div>

					<!-- Categoria 2 -->
					<div class="category" (click)="openSubmenu($event, 'categoria2')">Categoria 2</div>

					<!-- Categoria 3 -->
					<div class="category" (click)="openSubmenu($event, 'categoria3')">Categoria 3</div>
				</mat-nav-list>

				<!-- Submenu fora do Sidenav -->
				<div
					*ngIf="openCategory"
					class="submenu"
					[style.top.px]="submenuPosition.y"
					[style.left.px]="submenuPosition.x"
				>
					<ng-container *ngIf="openCategory === 'categoria1'">
						<mat-accordion>
							<mat-expansion-panel>
								<mat-expansion-panel-header>
									<mat-panel-title> This is the expansion title </mat-panel-title>
								</mat-expansion-panel-header>
								<p>This is the primary content of the panel.</p>
							</mat-expansion-panel>
							<mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
								<mat-expansion-panel-header>
									<mat-panel-title> Self aware panel </mat-panel-title>
								</mat-expansion-panel-header>
								<p>I'm visible because I am open</p>
							</mat-expansion-panel>
						</mat-accordion>
					</ng-container>
					<ng-container *ngIf="openCategory === 'categoria2'">
						<mat-accordion>
							<mat-expansion-panel hideToggle>
								<mat-expansion-panel-header>
									<mat-panel-title> This is the expansion title </mat-panel-title>
								</mat-expansion-panel-header>
								<p>This is the primary content of the panel.</p>
							</mat-expansion-panel>
							<mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
								<mat-expansion-panel-header>
									<mat-panel-title> Self aware panel </mat-panel-title>
								</mat-expansion-panel-header>
								<p>I'm visible because I am open</p>
							</mat-expansion-panel>
						</mat-accordion>
					</ng-container>
					<ng-container *ngIf="openCategory === 'categoria3'">
						<mat-accordion>
							<mat-expansion-panel hideToggle>
								<mat-expansion-panel-header>
									<mat-panel-title> This is the expansion title </mat-panel-title>
								</mat-expansion-panel-header>
								<p>This is the primary content of the panel.</p>
							</mat-expansion-panel>
							<mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
								<mat-expansion-panel-header>
									<mat-panel-title> Self aware panel </mat-panel-title>
									<mat-panel-description>
										Currently I am {{ panelOpenState() ? 'open' : 'closed' }}
									</mat-panel-description>
								</mat-expansion-panel-header>
								<p>I'm visible because I am open</p>
							</mat-expansion-panel>
						</mat-accordion>
					</ng-container>
				</div>
			</div>
		</mat-sidenav>

		<mat-sidenav-content>
			<ng-content></ng-content>
		</mat-sidenav-content>
	</mat-sidenav-container>
</div>
